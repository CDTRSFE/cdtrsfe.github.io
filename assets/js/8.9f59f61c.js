(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{378:function(t,s,a){t.exports=a.p+"assets/img/process.15e508d3.jpg"},393:function(t,s,a){"use strict";a.r(s);var e=a(6),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"如何打造一个静态博客"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何打造一个静态博客"}},[t._v("#")]),t._v(" 如何打造一个静态博客")]),t._v(" "),e("p",[t._v("本篇文章主要是介绍如何搭建一个免费的个人或团队博客🎉。")]),t._v(" "),e("h3",{attrs:{id:"起因"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#起因"}},[t._v("#")]),t._v(" 起因")]),t._v(" "),e("p",[t._v("团队长期在内部系统中写技术文章，只能内部访问，辐射范围太小，写作和阅读体验差。")]),t._v(" "),e("h3",{attrs:{id:"好处"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#好处"}},[t._v("#")]),t._v(" 好处")]),t._v(" "),e("ul",[e("li",[t._v("提升团队在业界的品牌和影响力")]),t._v(" "),e("li",[t._v("有利于吸引求职者")])]),t._v(" "),e("h3",{attrs:{id:"目标"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目标"}},[t._v("#")]),t._v(" 目标")]),t._v(" "),e("p",[t._v("我们要实现的最终效果是：")]),t._v(" "),e("ul",[e("li",[e("em",[t._v("不花一分钱")])]),t._v(" "),e("li",[t._v("外网可"),e("strong",[t._v("快速")]),t._v("访问")]),t._v(" "),e("li",[t._v("更好的写作体验")]),t._v(" "),e("li",[t._v("自动化部署")])]),t._v(" "),e("h2",{attrs:{id:"写作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#写作"}},[t._v("#")]),t._v(" 写作")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("好的写作体验是什么？Vscode之类的本地编辑器肯定是首选的工具，纯粹的写作就应该是纯文本的，因此Markdown也自然成了最佳的格式。")])]),t._v(" "),e("h3",{attrs:{id:"cms选择"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cms选择"}},[t._v("#")]),t._v(" CMS选择")]),t._v(" "),e("p",[t._v("选择 "),e("code",[t._v("vuepress")]),t._v(" 的原因是因为它")]),t._v(" "),e("ul",[e("li",[t._v("基于我们熟悉的Vue")]),t._v(" "),e("li",[t._v("可插入Vue组件")]),t._v(" "),e("li",[t._v("支持本地 Markdown 纯写作")]),t._v(" "),e("li",[t._v("支持本地预览和热加载")]),t._v(" "),e("li",[t._v("支持丰富的插件和定制")])]),t._v(" "),e("p",[t._v("当然也有其它类似的，可以查看"),e("a",{attrs:{href:"https://vuepress.vuejs.org/zh/guide/#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E6%98%AF",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网的对比"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"markdown"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#markdown"}},[t._v("#")]),t._v(" Markdown")]),t._v(" "),e("p",[t._v("VuePress 使用 "),e("a",{attrs:{href:"https://markdown-it.github.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("markdown-it"),e("OutboundLink")],1),t._v(" 来渲染 Markdown")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://vuepress.vuejs.org/zh/guide/markdown.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vuepress Markdown扩展"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[t._v("#")]),t._v(" 部署")]),t._v(" "),e("p",[t._v("完成写作之后，可以执行 "),e("code",[t._v("npm run build")]),t._v(" 来将其构建成可以在浏览器中运行的目标文件。")]),t._v(" "),e("h3",{attrs:{id:"服务空间选择"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#服务空间选择"}},[t._v("#")]),t._v(" 服务空间选择")]),t._v(" "),e("p",[t._v("生成的 "),e("code",[t._v("dist")]),t._v(" 目录需要部署到服务器上面绑上域名才可以在外网浏览，所以我们需要选择一个服务器，那么通常的服务器是需要收费的。")]),t._v(" "),e("p",[t._v("但穷，穷则生变，会引发我们思考，有没有免费的服务器可以用来部署呢？当然有，Github本身就提供了静态页面托管的功能"),e("a",{attrs:{href:"https://pages.github.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub Pages"),e("OutboundLink")],1),t._v("，我们只需要把生成的 "),e("code",[t._v("dist")]),t._v(" push 到指定的仓库即可在线上浏览，详细步骤就不说了。")]),t._v(" "),e("h3",{attrs:{id:"ci持续集成"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ci持续集成"}},[t._v("#")]),t._v(" CI持续集成")]),t._v(" "),e("p",[t._v("每次写完都要手动 build 显然是不够人性化的，能不能写完就直接 push 就能自动帮我们 build 然后部署呢？这就是 CI 的作用了，当然 CI 也有很多，那么 Github 也提供了，名为 Github Acitons，用法可参考"),e("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("阮一峰的 GitHub Actions 入门教程"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("新建两个仓库，一个用来存放文章的源码，另外一个用来存放构建之后的目标文件用来运行。")]),t._v(" "),e("p",[t._v("要使用 Github Actions，只需要新建一个部署文件 "),e("code",[t._v(".github/workfkows/xxx.yml")]),t._v(" 即可，内容如下")]),t._v(" "),e("div",{staticClass:"language-yml extra-class"},[e("div",{staticClass:"highlight-lines"},[e("br"),e("br"),e("br"),e("br"),e("div",{staticClass:"highlighted"},[t._v(" ")]),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br")]),e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Build and Deploy\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("push"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build-and-deploy")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Checkout\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@master\n\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vuepress"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" jenkey2011/vuepress"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy@master\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ACCESS_TOKEN")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.ACCESS_TOKEN "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("TARGET_REPO")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" CDTRSFE/cdtrsfe.github.io\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("TARGET_BRANCH")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" master\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("BUILD_SCRIPT")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm install "),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("&&")]),t._v(" npm run build\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("BUILD_DIR")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" blogs/.vuepress/dist/\n")])])]),e("h3",{attrs:{id:"国内加速"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#国内加速"}},[t._v("#")]),t._v(" 国内加速")]),t._v(" "),e("p",[t._v("主要工作完成了，但是众所周知，Github Page 的访问速度比较慢，不太稳定，我又陷入了沉思，如何让他快起来呢？我悟到了，没错，就是镜像。")]),t._v(" "),e("p",[t._v("因为国内也有很多Git服务（如Coding、Gitee...）经过测试，Gitee支持和Github一样的静态网站托管服务，于是我选择了它。")]),t._v(" "),e("p",[t._v("所以整个流程就变成了：")]),t._v(" "),e("p",[e("img",{attrs:{src:a(378),alt:"流程图"}})]),t._v(" "),e("h3",{attrs:{id:"后续"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#后续"}},[t._v("#")]),t._v(" 后续")]),t._v(" "),e("p",[t._v("实际使用过程中，发现 Gitee 不能自动更新，每次同步代码之后都需要手动点击按钮重新部署之后才能在线上看到更新的内容。如何解决这个问题呢？针对这种情况可以再新增一个 Github Action，再里面跑一个 Docker 然后用 Puppeteer 模拟登录和点击按钮重新部署。")])])}),[],!1,null,null,null);s.default=r.exports}}]);